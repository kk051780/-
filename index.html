<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>人生偏差値ラボ（v1・単一ページ版）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0f172a;
      --bg-card: #111827;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.15);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --danger: #f97373;
      --border: #1f2937;
      --radius-lg: 16px;
      --radius-md: 10px;
      --shadow-soft: 0 20px 40px rgba(15, 23, 42, 0.45);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #1f2937 0, #020617 55%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
    }

    .page {
      width: 100%;
      max-width: 960px;
      padding: 24px 16px 40px;
    }

    header {
      margin-bottom: 16px;
    }

    .title {
      font-size: 1.8rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.6rem;
      margin-bottom: 6px;
    }

    .badge {
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid var(--accent);
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .subtitle {
      font-size: 0.9rem;
      color: var(--muted);
      max-width: 36rem;
    }

    /* モードタブ */
    .mode-tabs {
      display: inline-flex;
      margin-top: 14px;
      padding: 3px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      gap: 2px;
    }

    .mode-tab {
      border: none;
      padding: 4px 14px;
      font-size: 0.8rem;
      border-radius: 999px;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      transition: all 0.15s ease;
      white-space: nowrap;
    }

    .mode-tab.active {
      background: linear-gradient(135deg, #38bdf8, #22c55e);
      color: #020617;
      font-weight: 600;
    }

    /* 共通レイアウト・カード */
    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.6fr);
      gap: 16px;
    }

    @media (max-width: 768px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: linear-gradient(145deg, #020617, #020617, #020617);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 163, 184, 0.08);
      padding: 18px 18px 20px;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -120px;
      background: radial-gradient(
        circle at top left,
        rgba(56, 189, 248, 0.18),
        transparent 60%
      );
      opacity: 0.5;
      pointer-events: none;
    }

    .card-content {
      position: relative;
      z-index: 1;
    }

    .card h2 {
      font-size: 1.1rem;
      margin: 0 0 12px;
    }

    .card p {
      margin: 0;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .field-group {
      margin-top: 14px;
    }

    .field-label {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .pill-toggle {
      display: inline-flex;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      padding: 3px;
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    .pill-toggle button {
      border: none;
      padding: 4px 12px;
      font-size: 0.8rem;
      border-radius: 999px;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .pill-toggle button.active {
      background: linear-gradient(135deg, #38bdf8, #22c55e);
      color: #020617;
      font-weight: 600;
    }

    .slider-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    input[type="range"],
    input[type="number"],
    select {
      width: 100%;
      accent-color: var(--accent);
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text);
      padding: 4px 10px;
      font-size: 0.8rem;
      outline: none;
    }

    input[type="range"] {
      padding: 0;
      background: transparent;
      border: none;
    }

    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    input[type="number"] {
      -moz-appearance: textfield;
    }

    .value-badge {
      min-width: 58px;
      text-align: center;
      padding: 4px 8px;
      font-size: 0.8rem;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .hint {
      font-size: 0.78rem;
      color: var(--muted);
      margin-top: 4px;
      line-height: 1.4;
    }

    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 10px;
    }

    .results-header-title {
      font-size: 0.95rem;
      font-weight: 600;
    }

    .results-header-sub {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .scenario-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    @media (max-width: 768px) {
      .scenario-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .scenario-card {
      border-radius: var(--radius-md);
      border: 1px solid rgba(148, 163, 184, 0.2);
      background: radial-gradient(
          circle at top,
          rgba(56, 189, 248, 0.12),
          transparent 60%
        ),
        rgba(15, 23, 42, 0.96);
      padding: 10px 10px 12px;
      font-size: 0.82rem;
    }

    .scenario-title {
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 4px;
    }

    .scenario-tag {
      font-size: 0.7rem;
      padding: 1px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--muted);
    }

    .scenario-tag.primary {
      border-color: var(--accent);
      color: var(--accent);
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      margin-top: 3px;
    }

    .stat-label {
      color: var(--muted);
    }

    .stat-value {
      font-weight: 600;
    }

    .stat-value.highlight {
      color: var(--accent);
    }

    .stat-value.danger {
      color: var(--danger);
    }

    .small-note {
      font-size: 0.7rem;
      color: var(--muted);
      margin-top: 6px;
      line-height: 1.4;
    }

    .delta-text {
      font-size: 0.8rem;
      margin-top: 6px;
    }

    .delta-text strong {
      color: var(--accent);
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }

    .chip {
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      color: var(--muted);
      background: rgba(15, 23, 42, 0.9);
    }

    .chip.strong {
      border-color: var(--accent);
      color: var(--accent);
    }

    .route-label {
      font-size: 0.74rem;
      margin-top: 6px;
      color: var(--muted);
    }

    /* モード表示切り替え */
    .mode-section {
      margin-top: 12px;
    }

    .mode-section.hidden {
      display: none;
    }

    footer {
      margin-top: 16px;
      font-size: 0.7rem;
      color: var(--muted);
      max-width: 40rem;
    }

    .placeholder-list {
      margin-top: 10px;
      padding-left: 18px;
      font-size: 0.85rem;
      color: var(--muted);
    }

    .placeholder-list li {
      margin-bottom: 4px;
    }

    .metric-pill {
      display: inline-flex;
      align-items: baseline;
      gap: 4px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.9);
      font-size: 0.78rem;
    }

    .metric-pill-label {
      color: var(--muted);
    }

    .metric-pill-value {
      font-weight: 600;
    }
  </style>
</head>
<body>
  <main class="page">
    <header>
      <div class="badge">PROTOTYPE · SINGLE URL</div>
      <div class="title">
        人生偏差値ラボ
        <span style="font-size:0.8rem; color:#9ca3af;">
          – 高校生 / 新卒 / 家計（DSCR）ミニシミュレーター v1
        </span>
      </div>
      <p class="subtitle">
        「今の偏差値・学歴・家計」が、将来の年収レンジや選べるルートにどう効いてくるかを可視化する実験ツールです。
        このバージョンでは、<strong>高校生の偏差値アップ効果</strong>・<strong>新卒就職力</strong>・<strong>家計DSCR/FI年数</strong>を単一URLで確認できます。
      </p>

      <nav class="mode-tabs" id="modeTabs">
        <button class="mode-tab active" data-mode="highschool">高校生モード</button>
        <button class="mode-tab" data-mode="newgrad">新卒・就活モード</button>
        <button class="mode-tab" data-mode="worker">家計・DSCRモード</button>
      </nav>
    </header>

    <!-- ▼▼ 高校生モード ▼▼ -->
    <section id="mode-highschool" class="mode-section">
      <section class="layout">
        <!-- 左：入力 -->
        <section class="card">
          <div class="card-content">
            <h2>1. 今の自分をセットする（高校生）</h2>
            <p>
              今の模試偏差値と、ざっくりの進路イメージ（文系寄り・理系寄り）を入れてください。
              「今のまま」「＋5」「＋10」の3パターンで30歳年収と進路ルートを比較します。
            </p>

            <div class="field-group">
              <div class="field-label">文系 / 理系のイメージ</div>
              <div class="pill-toggle" id="hs-trackToggle">
                <button type="button" data-track="arts" class="active">文系寄り</button>
                <button type="button" data-track="science">理系寄り</button>
              </div>
              <div class="hint">
                どちらか迷う場合は、<strong>「理系教科（数学・物理など）で勝負する気があるかどうか」</strong>で選んでOKです。
              </div>
            </div>

            <div class="field-group">
              <div class="field-label">今の模試偏差値（おおよそ）</div>
              <div class="slider-row">
                <input
                  id="hs-currentHen"
                  type="range"
                  min="40"
                  max="70"
                  step="1"
                  value="50"
                />
                <div class="value-badge">
                  <span id="hs-currentHenValue">50</span>
                </div>
              </div>
              <div class="hint">
                実際の模試が 47〜53 あたりなら「50」、 52〜58 あたりなら「55」…のようにざっくりで大丈夫です。
              </div>
            </div>

            <div class="field-group">
              <div class="field-label">この画面でわかること</div>
              <div class="chip-row">
                <div class="chip strong">30歳前後の年収レンジの差</div>
                <div class="chip">生涯ベースのざっくり差額（万円）</div>
                <div class="chip">偏差値アップで変わる進路ルートのイメージ</div>
              </div>
            </div>
          </div>
        </section>

        <!-- 右：結果 -->
        <section class="card">
          <div class="card-content">
            <div class="results-header">
              <div>
                <div class="results-header-title">
                  2. 30歳あたりの年収 &amp; 進路イメージ（試算）
                </div>
                <div class="results-header-sub">
                  偏差値の違いによる「30歳時点の年収レンジ」と「代表的な進路ルート」を比較表示します。
                </div>
              </div>
            </div>

            <div class="scenario-grid" id="hs-scenarioGrid"></div>

            <div class="small-note">
              ※ 金額・進路ルートはすべて<strong>概算のモデル値</strong>です。
              実際の人生は、分野選び・行動・タイミング・運などで大きく変わります。
              「偏差値さえ上げれば勝ち」でも「偏差値に意味はない」でもなく、
              <strong>「偏差値は、選べるルートを増やすための1つのレバー」</strong>として捉えてください。
            </div>
          </div>
        </section>
      </section>
    </section>
    <!-- ▲▲ 高校生モード ▲▲ -->

    <!-- ▼▼ 新卒モード ▼▼ -->
    <section id="mode-newgrad" class="mode-section hidden">
      <section class="layout">
        <!-- 左：入力 -->
        <section class="card">
          <div class="card-content">
            <h2>1. プロフィール入力（新卒・就活）</h2>
            <p>
              大学・学部・院・インターンなどの情報から、
              <strong>ざっくり「新卒就職力偏差値」</strong>と30歳年収レンジを推定します。
            </p>

            <div class="field-group">
              <div class="field-label">大学レベル帯</div>
              <select id="ng-univRank">
                <option value="1.0">F〜Eランク相当（地方私立・短大など）</option>
                <option value="2.0" selected>地方国公立・中堅私大</option>
                <option value="3.0">MARCH / 産近甲龍クラス</option>
                <option value="4.0">早慶・上位国公立</option>
                <option value="5.0">東大・京大・難関旧帝クラス</option>
              </select>
              <div class="hint">
                正確な判定ではなく、<strong>「だいたいこのあたり」</strong>という感覚で選んでください。
              </div>
            </div>

            <div class="field-group">
              <div class="field-label">専攻タイプ</div>
              <select id="ng-majorType">
                <option value="1.0">文系一般（文・教育・社会・人文系など）</option>
                <option value="1.2" selected>経済・商・経営・法など</option>
                <option value="1.4">工学・情報・理学など（理系）</option>
                <option value="1.5">看護・薬学・医療系</option>
                <option value="1.8">医学部医学科クラス</option>
              </select>
            </div>

            <div class="field-group">
              <div class="field-label">最終学位（予定）</div>
              <select id="ng-degreeLevel">
                <option value="0" selected>学部卒（学士）</option>
                <option value="0.5">修士卒（院卒）</option>
                <option value="1.0">博士卒</option>
              </select>
            </div>

            <div class="field-group">
              <div class="field-label">成績帯（GPAのイメージ）</div>
              <select id="ng-gpaBand">
                <option value="-0.5">〜2.3くらい</option>
                <option value="0" selected>2.3〜3.0くらい</option>
                <option value="0.5">3.0〜3.5くらい</option>
                <option value="1.0">3.5〜4.0くらい</option>
              </select>
            </div>

            <div class="field-group">
              <div class="field-label">インターン経験</div>
              <select id="ng-intern">
                <option value="0" selected>まだ参加していない</option>
                <option value="0.5">1社・短期インターンに参加した</option>
                <option value="1.0">複数社 or 長期インターン経験あり</option>
              </select>
            </div>

            <div class="field-group">
              <div class="field-label">英語・資格</div>
              <select id="ng-english">
                <option value="0" selected>特に強みなし</option>
                <option value="0.5">TOEIC〜650 / 英検2級 など</option>
                <option value="1.0">TOEIC700〜800 くらい</option>
                <option value="1.5">TOEIC800＋ / 帰国子女級</option>
              </select>
              <div class="hint">
                詳細な資格管理までは行わず、「ざっくり強みがあるかどうか」を見るイメージです。
              </div>
            </div>

            <div class="field-group">
              <div class="field-label">専門資格の有無</div>
              <select id="ng-cert">
                <option value="0" selected>特になし / 汎用資格のみ</option>
                <option value="0.5">簿記・情報処理・FP など</option>
                <option value="1.0">看護師・薬剤師など国家資格系</option>
              </select>
            </div>
          </div>
        </section>

        <!-- 右：結果 -->
        <section class="card">
          <div class="card-content">
            <div class="results-header">
              <div>
                <div class="results-header-title">
                  2. 新卒就職力偏差値 &amp; 年収レンジ（ざっくり）
                </div>
                <div class="results-header-sub">
                  学歴 × 成績 × 活動量から就職力スコアを合成し、「全国同年代と比べたポジション」を偏差値風に表示します。
                </div>
              </div>
            </div>

            <div class="chip-row">
              <div class="metric-pill">
                <span class="metric-pill-label">就職力偏差値</span>
                <span class="metric-pill-value" id="ng-hensachiLabel">–</span>
              </div>
              <div class="metric-pill">
                <span class="metric-pill-label">想定30歳年収（中央値）</span>
                <span class="metric-pill-value" id="ng-incomeMedianLabel">–</span>
              </div>
              <div class="metric-pill">
                <span class="metric-pill-label">上位ゾーン（P80目安）</span>
                <span class="metric-pill-value" id="ng-incomeP80Label">–</span>
              </div>
            </div>

            <div class="field-group">
              <div class="field-label">ポジションのイメージ</div>
              <p class="hint" id="ng-positionText">
                入力すると、ここに「おおよそのポジション（上位◯％くらい）」が表示されます。
              </p>
            </div>

            <div class="field-group">
              <div class="field-label">向いている職種クラスター（例）</div>
              <div class="chip-row" id="ng-jobClusterChips"></div>
            </div>

            <div class="field-group">
              <div class="field-label">コメント（仮説）</div>
              <p class="hint" id="ng-commentText">
                強み・弱み・これから伸ばすと効きやすいポイントを、ざっくりコメントします。
              </p>
            </div>

            <div class="small-note">
              ※ ここでの偏差値はあくまで「モデル上の擬似偏差値」であり、
              実際の企業の採用基準や選考結果を保証するものではありません。
            </div>
          </div>
        </section>
      </section>
    </section>
    <!-- ▲▲ 新卒モード ▲▲ -->

    <!-- ▼▼ 家計・DSCRモード ▼▼ -->
    <section id="mode-worker" class="mode-section hidden">
      <section class="layout">
        <!-- 左：入力 -->
        <section class="card">
          <div class="card-content">
            <h2>1. 家計情報を入れる（ざっくりでOK）</h2>
            <p>
              年間ベースで、世帯としての収入・生活費・ローン返済・金融資産を入れると、
              <strong>家計DSCR偏差値</strong>と<strong>FI年数偏差値</strong>をざっくり計算します。
            </p>

            <div class="field-group">
              <div class="field-label">世帯年収（税引き前・万円）</div>
              <input id="wk-income" type="number" value="900" min="0" step="10" />
              <div class="hint">例）会社員夫婦で合計年収900万円 → 「900」</div>
            </div>

            <div class="field-group">
              <div class="field-label">年間の生活費（最低限必要なライン・万円）</div>
              <input id="wk-expense" type="number" value="500" min="0" step="10" />
              <div class="hint">
                住居費・食費・教育費など、「これ以下にするとかなり厳しい」というラインを入れてください。
              </div>
            </div>

            <div class="field-group">
              <div class="field-label">年間ローン返済額（住宅ローンなど・万円）</div>
              <input id="wk-loan" type="number" value="120" min="0" step="5" />
              <div class="hint">
                住宅ローン・教育ローンなどの<strong>元利合計</strong>。なければ「0」でOKです。
              </div>
            </div>

            <div class="field-group">
              <div class="field-label">金融資産（現金・株・投信など合計・万円）</div>
              <input id="wk-assets" type="number" value="800" min="0" step="10" />
              <div class="hint">
                不動産は抜きで、預金・iDeCo・積立NISA・株などの合計をざっくりで。
              </div>
            </div>
          </div>
        </section>

        <!-- 右：結果 -->
        <section class="card">
          <div class="card-content">
            <div class="results-header">
              <div>
                <div class="results-header-title">
                  2. 家計DSCR / FI年数（ざっくり偏差値）
                </div>
                <div class="results-header-sub">
                  投資家が見る「DSCR」の考え方を家計に持ち込み、生活の守り／攻めのバランスを偏差値っぽく見える化します。
                </div>
              </div>
            </div>

            <div class="chip-row">
              <div class="metric-pill">
                <span class="metric-pill-label">家計DSCR</span>
                <span class="metric-pill-value" id="wk-dscrLabel">–</span>
              </div>
              <div class="metric-pill">
